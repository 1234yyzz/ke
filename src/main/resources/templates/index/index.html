<!--
*
*  INSPINIA - Responsive Admin Theme
*  version 2.9.3
*
-->

<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>INSPINIA | Dashboard</title>

    <link href="resources/css/bootstrap.min.css" rel="stylesheet">
    <link href="resources/font-awesome/css/font-awesome.css" rel="stylesheet">

    <!--Tables-->
    <link href="resources/css/plugins/dataTables/datatables.min.css" rel="stylesheet">
    <!-- Toastr style -->
    <link href="resources/css/plugins/toastr/toastr.min.css" rel="stylesheet">
    <link href="resources/css/plugins/dataTables/datatables.min.css" rel="stylesheet">

    <!-- Gritter -->
    <link href="resources/js/plugins/gritter/jquery.gritter.css" rel="stylesheet">

    <link href="resources/css/animate.css" rel="stylesheet">
    <link href="resources/css/style.css" rel="stylesheet">

</head>

<body>
    <div id="wrapper">
        <nav class="navbar-default navbar-static-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav metismenu" id="side-menu">
                    <li class="nav-header">
                        <div class="dropdown profile-element">
                            <img alt="image" class="rounded-circle" src="img/profile_small.jpg"/>
                            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                <span class="block m-t-xs font-bold">David Williams</span>
                                <span class="text-muted text-xs block">Art Director <b class="caret"></b></span>
                            </a>
                            <ul class="dropdown-menu animated fadeInRight m-t-xs">
                                <li><a class="dropdown-item" href="profile.html">Profile</a></li>
                                <li><a class="dropdown-item" href="contacts.html">Contacts</a></li>
                                <li><a class="dropdown-item" href="mailbox.html">Mailbox</a></li>
                                <li class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="login.html">Logout</a></li>
                            </ul>
                        </div>
                        <div class="logo-element">
                            IN+
                        </div>
                    </li>
                    <li class="active">
                        <a >
                            <i class="fa fa-th-large"></i>
                            <span class="nav-label">Dashboards</span>
                            <span class="fa arrow"></span>
                        </a>
                        <ul class="nav nav-second-level">
                            <li class="active"><a href="javascript:void(0)" onclick="skipToPage('/KeSystem/text')" >Dashboard v.1</a></li>
                        </ul>
                    </li>
                    <li th:each="menu:${menus}">
                        <a th:if="${menu.childs eq null}" th:href="@{${menu.address}}">
                            <i class="fa " th:th:classappend="${menu.flag}"></i>
                            <span class="nav-label" th:text="${menu.name}"></span>
                        </a>
                        <a href="" th:if="${menu.childs ne null}">
                            <i class="fa " th:classappend="${menu.flag}"></i>
                            <span class="nav-label" th:text="${menu.name}"></span>
                            <span class="fa arrow"></span>
                        </a>
                        <ul th:if="${menu.childs ne null}" class="nav nav-second-level">
                            <li th:each="childMenu:${menu.childs}" >
                                <a th:if="${childMenu.childs eq null}" th:href="@{${childMenu.address}}">
                                    <i class="fa " th:classappend="${childMenu.flag}">
                                        <span class="nav-label" style="font-style: normal; font-weight: 600;" th:text="${childMenu.name}"></span>
                                    </i>
                                </a>
                                <a href="" th:if="${childMenu.childs ne null}">
                                    <i class="fa " th:th:classappend="${childMenu.flag}"></i>
                                    <span class="nav-label" style="font-style: normal; font-weight: 600;" th:text="${childMenu.name}"></span>
                                    <span class="fa arrow"></span></a>
                                </a>
                                <ul th:if="${childMenu.childs ne null}" class="nav nav-third-level">
                                    <li th:each="grand:${childMenu.childs}">
                                        <a th:href="@{${grand.address}}">
                                            <i class="fa " th:th:classappend="${grand.flag}"></i>
                                            <span class="nav-label" style="font-style: normal; font-weight: 600;" th:text="${grand.name}"></span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>

        <div id="page-wrapper" class="gray-bg">
            <div id="firstModel" class="row border-bottom">
        <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
            <!--<div class="navbar-header">
                <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
                <form role="search" class="navbar-form-custom" action="search_results.html">
                    <div class="form-group">
                        <input type="text" placeholder="Search for something..." class="form-control" name="top-search" id="top-search">
                    </div>
                </form>
            </div>-->
        </nav>
    </div>
    <div class="wrapper wrapper-content">
    </div>

    <!-- Toast notification -->

    <!-- Mainly scripts -->
    <script src="resources/js/jquery-3.1.1.min.js"></script>
    <script src="resources/js/popper.min.js"></script>
    <script src="resources/js/bootstrap.js"></script>
    <script src="resources/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="resources/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Flot -->
    <script src="resources/js/plugins/flot/jquery.flot.js"></script>
    <script src="resources/js/plugins/flot/jquery.flot.tooltip.min.js"></script>
    <script src="resources/js/plugins/flot/jquery.flot.spline.js"></script>
    <script src="resources/js/plugins/flot/jquery.flot.resize.js"></script>
    <script src="resources/js/plugins/flot/jquery.flot.pie.js"></script>

    <!-- Peity -->
    <script src="resources/js/plugins/peity/jquery.peity.min.js"></script>
    <script src="resources/js/demo/peity-demo.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="resources/js/inspinia.js"></script>
    <script src="resources/js/plugins/pace/pace.min.js"></script>

    <!-- jQuery UI -->
    <script src="resources/js/plugins/jquery-ui/jquery-ui.min.js"></script>

    <!-- GITTER -->
    <script src="resources/js/plugins/gritter/jquery.gritter.min.js"></script>

    <!-- Sparkline -->
    <script src="resources/js/plugins/sparkline/jquery.sparkline.min.js"></script>

    <!-- Sparkline demo data  -->
    <script src="resources/js/demo/sparkline-demo.js"></script>

    <!-- ChartJS-->
    <script src="resources/js/plugins/chartJs/Chart.min.js"></script>

    <!-- Toastr -->
    <script src="resources/js/plugins/toastr/toastr.min.js"></script>

    <!--Tables-->
    <script src="resources/js/plugins/dataTables/datatables.min.js"></script>
    <script src="resources/js/plugins/dataTables/dataTables.bootstrap4.min.js"></script>

    <script th:inline="javascript" type="text/javascript">
        var hostname = [[${ctx}]];
        $(document).ready(function(){
            /*var menuUrl = hostname + "/menu/getMenusByRoleId";
            $.ajax({
                url:menuUrl,
                type: 'GET',
                success:function (data) {
                    data = JSON.parse(data);
                    if(data.success == true){
                        assembleMenus(data.data);
                    }
                }
            });*/
        });


        function assembleMenus1(menus) {
            for(var menu in menus){
                var ahtml = menus[menu].level == 1? "<a>" : "<a href='"+ menus[menu].address +"'>";
                var firstHtml = '<li class="active">\n' +
                    '            ' + ahtml + '<i class="fa fa-th-large"></i> <span class="nav-label">'+ menus[menu].name +'</span> <span class="fa arrow"></span></a>\n' +
                    '        <ul class="nav nav-second-level">\n' +
                    '            <li class="active"><a href="index.html">Dashboard v.1</a></li>\n' +
                    '        </ul>\n' +
                    '        </li>'
                $("#side-menu").append(firstHtml);
                $("#side-menu").load();
            }
            /*location.reload();*/
        }

        //渲染菜单
        function assembleMenus(menus) {
            for(var menu in menus){
                var ahtml = menus[menu].level == 1? "<a aria-expanded='false'>" : "<a aria-expanded='false' href='"+ menus[menu].address +"'>";
                var childsHtml = "";
                if(menus[menu].childs != null){
                    childsHtml = setMenuLevel(menus[menu].childs);
                }
                var html1 = "<li class='active'>" + ahtml +
                                "<i class='fa " + menus[menu].tag + "'></i> <span class='nav-label'>" + menus[menu].name + "</span> <span class='fa arrow'></span></a>" +
                                childsHtml +
                            "</li>";
                $("#side-menu").append(html1);
            }
        }

        function skipToPage(url) {
            $("#page-wrapper").load(url);
            $("#wrapper").refresh();
            /*location.reload();*/
        }

        function setMenuLevel(childs){
            var firstHtml = "";
            var lastHtml = '</ul>';
            var secondHtml = "";
            for(var child in childs){
                if(childs[child].childs != null){
                    secondHtml = setMenuLevel(childs[child].childs)
                }
                else{
                    if(childs[child].level == 2){
                        firstHtml = '<ul class="nav nav-second-level collapse" aria-expanded="false" style="height: 0px;">' +
                            '<li class="active"><a href="' + childs[child].address+ '"> '+ childs[child].name +'</a></li>';
                    }
                    else {
                        firstHtml = '<ul class="nav nav-third-level collapse" aria-expanded="false" style="height: 0px;">' +
                            '<li class="active"><a href="' + childs[child].address+ '"> '+ childs[child].name +'</a></li>';
                    }
                }
                return firstHtml + secondHtml + lastHtml;
            }
        }

        function getPageInfo(url) {
        url = hostname + url + "?pageSize=10&pageNo=1";
        $.ajax({
            url:url,
            type: 'GET',
            success:function (data) {
                $("#firstModel").nextAll().remove();
                $("#firstModel").parent().append(data);
            }
        });
        }
    </script>
</body>
</html>
